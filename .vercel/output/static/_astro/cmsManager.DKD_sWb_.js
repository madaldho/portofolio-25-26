const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/contentful.BvkSSILh.js","_astro/_commonjsHelpers.Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./preload-helper.BlTxHScW.js";class l{spaceId;environmentId;useLocalStorage;constructor(){this.spaceId="hbrrn0bf99r5",this.environmentId="master",this.useLocalStorage=typeof window<"u"}async createBlogPost(t){try{if(!this.useLocalStorage){const r=await fetch("/api/cms/blog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok)return await r.json()}const e={id:`blog_${Date.now()}`,contentType:"blogPost",fields:{title:{"en-US":t.title},slug:{"en-US":t.slug},excerpt:{"en-US":t.excerpt},content:{"en-US":t.content},tags:{"en-US":t.tags},publishDate:{"en-US":t.publishDate}},status:t.status,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.saveToLocalStorage("blogPosts",e),window.dispatchEvent(new CustomEvent("contentCreated",{detail:{type:"Blog Post",title:t.title}})),e}catch(e){return console.error("Error creating blog post:",e),null}}async createProject(t){try{if(!this.useLocalStorage){const r=await fetch("/api/cms/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok)return await r.json()}const e={id:`project_${Date.now()}`,contentType:"simpleProject",fields:{title:{"en-US":t.title},slug:{"en-US":t.slug},description:{"en-US":t.description},category:{"en-US":t.category},featured:{"en-US":t.featured}},status:"draft",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return this.saveToLocalStorage("projects",e),e}catch(e){return console.error("Error creating project:",e),null}}async updateContent(t,e){try{const r=this.getFromLocalStorage("blogPosts"),s=this.getFromLocalStorage("projects");let n=r.find(o=>o.id===t)||s.find(o=>o.id===t);if(!n)throw new Error("Content not found");if(Object.keys(e).forEach(o=>{e[o]!==void 0&&(n.fields[o]={"en-US":e[o]})}),n.updatedAt=new Date().toISOString(),n.contentType==="blogPost"){const o=r.map(i=>i.id===t?n:i);localStorage.setItem("cms_blogPosts",JSON.stringify(o))}else{const o=s.map(i=>i.id===t?n:i);localStorage.setItem("cms_projects",JSON.stringify(o))}return n}catch(r){return console.error("Error updating content:",r),null}}async deleteContent(t){try{const e=this.getFromLocalStorage("blogPosts"),r=this.getFromLocalStorage("projects"),s=e.filter(o=>o.id!==t),n=r.filter(o=>o.id!==t);return localStorage.setItem("cms_blogPosts",JSON.stringify(s)),localStorage.setItem("cms_projects",JSON.stringify(n)),!0}catch(e){return console.error("Error deleting content:",e),!1}}async publishContent(t){try{const e=await this.updateContent(t,{status:"published"});return e&&(e.publishedAt=new Date().toISOString(),e.status="published"),!!e}catch(e){return console.error("Error publishing content:",e),!1}}async getAllBlogPosts(){try{const{getBlogPosts:t,isContentfulConfigured:e}=await c(async()=>{const{getBlogPosts:r,isContentfulConfigured:s}=await import("./contentful.BvkSSILh.js");return{getBlogPosts:r,isContentfulConfigured:s}},__vite__mapDeps([0,1]));if(e()){const r=await t();if(r.length>0)return r.map(s=>({id:s.sys.id,contentType:"blogPost",fields:{title:{"en-US":s.fields.title},slug:{"en-US":s.fields.slug},excerpt:{"en-US":s.fields.excerpt},content:{"en-US":s.fields.content},tags:{"en-US":s.fields.tags},publishDate:{"en-US":s.fields.publishDate}},status:"published",createdAt:s.sys.createdAt,updatedAt:s.sys.updatedAt,publishedAt:s.sys.updatedAt}))}}catch(t){console.warn("Error fetching blog posts from Contentful:",t)}return this.getFromLocalStorage("blogPosts")}async getAllProjects(){try{const{getSimpleProjects:t,isContentfulConfigured:e}=await c(async()=>{const{getSimpleProjects:r,isContentfulConfigured:s}=await import("./contentful.BvkSSILh.js");return{getSimpleProjects:r,isContentfulConfigured:s}},__vite__mapDeps([0,1]));if(e()){const r=await t();if(r.length>0)return r.map(s=>({id:s.sys.id,contentType:"simpleProject",fields:{title:{"en-US":s.fields.title},slug:{"en-US":s.fields.slug},description:{"en-US":s.fields.description},category:{"en-US":s.fields.category},featured:{"en-US":s.fields.featured}},status:"published",createdAt:s.sys.createdAt,updatedAt:s.sys.updatedAt,publishedAt:s.sys.updatedAt}))}}catch(t){console.warn("Error fetching projects from Contentful:",t)}return this.getFromLocalStorage("projects")}async getContentStats(){const t=await this.getAllBlogPosts(),e=await this.getAllProjects(),s=[...t,...e].filter(n=>n.status==="published").length;return{blogPosts:t.length,projects:e.length,published:s}}async getRecentActivity(){const t=await this.getAllBlogPosts(),e=await this.getAllProjects();return[...t,...e].sort((s,n)=>new Date(n.updatedAt).getTime()-new Date(s.updatedAt).getTime()).slice(0,5)}saveToLocalStorage(t,e){const r=this.getFromLocalStorage(t);r.push(e),localStorage.setItem(`cms_${t}`,JSON.stringify(r))}getFromLocalStorage(t){try{const e=localStorage.getItem(`cms_${t}`);return e?JSON.parse(e):[]}catch{return[]}}static generateSlug(t){return t.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}static validateBlogPost(t){const e=[];return t.title?.trim()||e.push("Title is required"),t.excerpt?.trim()||e.push("Excerpt is required"),t.content?.trim()||e.push("Content is required"),t.publishDate||e.push("Publish date is required"),e}static validateProject(t){const e=[];return t.title?.trim()||e.push("Title is required"),t.description?.trim()||e.push("Description is required"),t.category||e.push("Category is required"),e}}const u=new l;export{l as C,u as c};
